# JoyCastle笔试


## 1.休闲游戏排⾏榜

找到第m大的数花费O(n)时间，对前m大的数排序花费O(mlogm)时间，最终时间复杂度O(n+mlogm)

进阶：若玩家数量达到百万，可以使用SortedSet等底层为红黑树的容器存储玩家分数，可以在O(logn)时间内找到第m大的数，且前m大的数已经排好序，只需O(m)时间取出。或者是维护一个大小为m的最小堆，存储最大的m个数，每次加入新分数就和堆顶数比较，如果比堆顶数大则替换掉堆顶并维护堆，否则丢弃。


## 2.魔法能量场

遍历所有组合，时间复杂度O(n^2)，空间复杂度O(1)。

进阶：1、如果可以临时增加某个位置塔高度，则增加后分别计算该塔和其他位置塔间的梯形面积，判断是否修正最大值，时间复杂度O(n)。

2、如果某些位置高度为0，则遍历到该位置时直接跳过。

思考：玩家需要考虑建造两个较高且距离较远的塔，来获得最大能量。


## 3.魔法宝箱探险

一次遍历得到结果，时间复杂度O(n)。额外使用了两个长度为n的数组，空间复杂度O(n)。

进阶：1、增加两个数组，记录开/不开第k个宝箱并且使用过了魔法钥匙的最大价值，而原本的两个数组记录没有使用过魔法钥匙的最大价值。

2、额外使用了一个记录不开第k个宝箱的最大价值数组，以此解决负价值宝箱(不开)的问题。否则可以去掉这个数组，仅使用记录开第k个宝箱的最大价值数组。

思考：玩家需要合理考虑选取哪些宝箱，并在价值较集中的位置使用魔法钥匙，以获得更高价值。


## 4.魔法天赋评估系统

使用二分法得到中位数，时间复杂度O(logn)，空间复杂度O(1)。

进阶：1、可以使用如SortedList等结构

2、增加到k个pivot，每次迭代除了最大的pivot所在数组，其他数组的index均增加。